import{j as e,r as o}from"./index-CWJm3WaG.js";import{u as I}from"./appStore-CDGwvAa2.js";import{C as V,f as r,P as L}from"./constants-D8V_QWiw.js";import{a as B}from"./index-D73ou2Vx.js";import{A as x,X as $,S as H}from"./x-BTPMTD08.js";import{c as l,m as i}from"./createLucideIcon-iWi5oUHK.js";import{S as y}from"./shopping-cart-uj2-E-lU.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=l("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=l("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=l("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=l("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=l("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=l("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function _({open:n,onClose:a,title:c,children:d,maxWidth:m="max-w-lg"}){return e.jsx(x,{children:n&&e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),e.jsxs(i.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",damping:25,stiffness:300},className:`relative w-full ${m} rounded-2xl border border-surface-600/50 bg-surface-800 p-6 shadow-2xl`,children:[c&&e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:c}),e.jsx("button",{onClick:a,className:"rounded-lg p-1.5 text-surface-400 transition hover:bg-surface-700 hover:text-white",children:e.jsx($,{size:18})})]}),d]})]})})}function Z(){const{products:n,cart:a,cartDiscount:c,addToCart:d,removeFromCart:m,updateCartQty:j,setCartDiscount:S,clearCart:z,completeSale:M}=I(),[b,P]=o.useState(""),[T,N]=o.useState(!1),[g,A]=o.useState("cash"),[q,u]=o.useState(!1),h=B(b,200),v=o.useMemo(()=>{if(!h)return n.filter(t=>t.stock>0).slice(0,20);const s=h.toLowerCase();return n.filter(t=>t.stock>0&&(t.name.toLowerCase().includes(s)||t.sku.toLowerCase().includes(s)))},[n,h]),w=a.reduce((s,t)=>s+t.subtotal,0),p=Math.max(0,w-c);function D(){M(g),u(!1),N(!0),setTimeout(()=>N(!1),2500)}return e.jsxs("div",{className:"flex h-full flex-col lg:flex-row",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin",children:[e.jsxs("div",{className:"mb-5",children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(y,{size:24,className:"text-primary-400"})," Punto de Venta"]}),e.jsx("p",{className:"text-sm text-surface-400",children:"Busca productos y agrégalos al carrito"})]}),e.jsxs("div",{className:"relative mb-5 max-w-md",children:[e.jsx(H,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-surface-500"}),e.jsx("input",{type:"text",value:b,onChange:s=>P(s.target.value),placeholder:"Buscar por nombre o SKU...",className:"w-full rounded-xl border border-surface-700/60 bg-surface-800/80 py-3 pl-9 pr-4 text-sm text-white placeholder-surface-500 outline-none transition focus:border-primary-500/50 focus:ring-1 focus:ring-primary-500/30",autoFocus:!0})]}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4",children:e.jsx(x,{children:v.map(s=>{const t=V[s.category],f=a.find(E=>E.productId===s.id);return e.jsxs(i.button,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:()=>d(s),className:`glass group relative rounded-xl p-4 text-left transition-all hover:border-primary-500/30 active:scale-[0.98] ${f?"ring-1 ring-primary-500/30":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("span",{className:"text-2xl",children:t==null?void 0:t.emoji}),e.jsx("span",{className:"text-lg font-bold text-primary-400",children:r(s.salePrice)})]}),e.jsx("p",{className:"mt-2 text-sm font-semibold text-white",children:s.name}),e.jsxs("p",{className:"text-xs text-surface-500",children:["Stock: ",s.stock," ",s.unit]}),f&&e.jsx("span",{className:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-primary-500 text-[10px] font-bold text-white",children:f.quantity}),e.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-xl bg-primary-500/10 opacity-0 transition group-hover:opacity-100",children:e.jsx(C,{size:20,className:"text-primary-400"})})]},s.id)})})}),v.length===0&&e.jsx("div",{className:"py-12 text-center text-surface-500",children:"No se encontraron productos disponibles."})]}),e.jsx("div",{className:"w-full shrink-0 border-l border-surface-800 bg-surface-900/95 lg:w-96",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-surface-800 px-5 py-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx(y,{size:18,className:"text-primary-400"}),"Carrito",a.length>0&&e.jsx("span",{className:"ml-1 flex h-5 min-w-[20px] items-center justify-center rounded-full bg-primary-500/20 px-1 text-xs font-semibold text-primary-400",children:a.reduce((s,t)=>s+t.quantity,0)})]}),a.length>0&&e.jsx("button",{onClick:z,className:"text-xs text-surface-500 hover:text-danger-400 transition",children:"Vaciar"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-thin",children:a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-surface-500",children:[e.jsx(y,{size:40,className:"mb-3 opacity-30"}),e.jsx("p",{className:"text-sm",children:"Carrito vacío"}),e.jsx("p",{className:"text-xs",children:"Agrega productos buscando arriba"})]}):e.jsx("div",{className:"space-y-2",children:e.jsx(x,{children:a.map(s=>e.jsxs(i.div,{layout:!0,initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex items-center gap-3 rounded-xl bg-surface-800/60 px-3 py-2.5",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"truncate text-sm font-medium text-white",children:s.productName}),e.jsxs("p",{className:"text-xs text-surface-500",children:[r(s.unitPrice)," c/u"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("button",{onClick:()=>j(s.productId,s.quantity-1),className:"flex h-7 w-7 items-center justify-center rounded-lg bg-surface-700 text-surface-400 transition hover:bg-surface-600 hover:text-white",children:e.jsx(F,{size:14})}),e.jsx("span",{className:"w-6 text-center text-sm font-semibold text-white",children:s.quantity}),e.jsx("button",{onClick:()=>j(s.productId,s.quantity+1),className:"flex h-7 w-7 items-center justify-center rounded-lg bg-surface-700 text-surface-400 transition hover:bg-surface-600 hover:text-white",children:e.jsx(C,{size:14})})]}),e.jsx("span",{className:"w-16 text-right text-sm font-semibold text-primary-400",children:r(s.subtotal)}),e.jsx("button",{onClick:()=>m(s.productId),className:"text-surface-600 transition hover:text-danger-400",children:e.jsx(Y,{size:14})})]},s.productId))})})}),a.length>0&&e.jsxs("div",{className:"border-t border-surface-800 p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{size:14,className:"text-accent-400"}),e.jsx("span",{className:"text-xs text-surface-400",children:"Descuento:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-surface-500",children:"$"}),e.jsx("input",{type:"number",min:0,value:c||"",onChange:s=>S(Number(s.target.value)),placeholder:"0",className:"w-16 rounded-lg border border-surface-700 bg-surface-800 px-2 py-1 text-sm text-white outline-none focus:border-accent-500/50"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-surface-400",children:"Subtotal"}),e.jsx("span",{className:"text-white",children:r(w)})]}),c>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-accent-400",children:"Descuento"}),e.jsxs("span",{className:"text-accent-400",children:["-",r(c)]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-surface-700 pt-2",children:[e.jsx("span",{className:"text-base font-bold text-white",children:"Total"}),e.jsx("span",{className:"text-xl font-bold text-primary-400",children:r(p)})]})]}),e.jsxs("button",{onClick:()=>u(!0),className:"btn-primary w-full rounded-xl py-3.5 text-base font-semibold flex items-center justify-center gap-2",children:[e.jsx(O,{size:18})," Cobrar ",r(p)]})]})]})}),e.jsx(_,{open:q,onClose:()=>u(!1),title:"Confirmar Pago",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-primary-400",children:r(p)}),e.jsxs("p",{className:"text-sm text-surface-400",children:[a.reduce((s,t)=>s+t.quantity,0)," producto(s)"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-surface-300",children:"Método de pago"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:L.map(s=>e.jsxs("button",{onClick:()=>A(s.id),className:`rounded-xl border p-3 text-center transition ${g===s.id?"border-primary-500/50 bg-primary-500/10 text-primary-400":"border-surface-700 bg-surface-800/60 text-surface-400 hover:border-surface-600"}`,children:[e.jsx("span",{className:"text-xl block",children:s.emoji}),e.jsx("span",{className:"text-xs mt-1 block",children:s.label})]},s.id))})]}),e.jsxs("button",{onClick:D,className:"btn-primary w-full rounded-xl py-3.5 text-base font-semibold flex items-center justify-center gap-2",children:[e.jsx(k,{size:18})," Confirmar Venta"]})]})}),e.jsx(x,{children:T&&e.jsxs(i.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},className:"fixed bottom-6 right-6 z-50 flex items-center gap-3 rounded-2xl border border-primary-500/30 bg-primary-500/20 px-6 py-4 shadow-2xl backdrop-blur-sm",children:[e.jsx(k,{size:24,className:"text-primary-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:"¡Venta registrada!"}),e.jsx("p",{className:"text-xs text-primary-300",children:"El inventario se ha actualizado"})]})]})})]})}export{Z as default};
