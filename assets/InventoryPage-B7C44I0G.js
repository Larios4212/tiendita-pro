import{j as e,r as n}from"./index-CWJm3WaG.js";import{a as k}from"./index-D73ou2Vx.js";import{S as v,X as S,A as P}from"./x-BTPMTD08.js";import{u as C}from"./appStore-CDGwvAa2.js";import{g as j,a as A,b as K,C as $,f as b}from"./constants-D8V_QWiw.js";import{P as E}from"./package-DxO2yiJI.js";import{c as y,m as M}from"./createLucideIcon-iWi5oUHK.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=y("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=y("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function F({value:l,onChange:o,placeholder:p="Buscar...",className:c=""}){return e.jsxs("div",{className:`relative ${c}`,children:[e.jsx(v,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-surface-500"}),e.jsx("input",{type:"text",value:l,onChange:x=>o(x.target.value),placeholder:p,className:"w-full rounded-xl border border-surface-700/60 bg-surface-800/80 py-2.5 pl-9 pr-9 text-sm text-white placeholder-surface-500 outline-none transition focus:border-primary-500/50 focus:ring-1 focus:ring-primary-500/30"}),l&&e.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-surface-500 hover:text-white",children:e.jsx(S,{size:14})})]})}const I={ok:{label:"OK",cls:"badge-success"},low:{label:"Bajo",cls:"badge-warning"},critical:{label:"Crítico",cls:"badge-danger"},out:{label:"Agotado",cls:"badge-danger"}};function q(){const{products:l}=C(),[o,p]=n.useState(""),[c,x]=n.useState("all"),[d,N]=n.useState("name"),[u,g]=n.useState(!0),h=k(o),f=n.useMemo(()=>{let s=[...l];if(c!=="all"&&(s=s.filter(t=>t.category===c)),h){const t=h.toLowerCase();s=s.filter(a=>a.name.toLowerCase().includes(t)||a.sku.toLowerCase().includes(t)||a.supplier.toLowerCase().includes(t))}return s.sort((t,a)=>{let r=0;switch(d){case"name":r=t.name.localeCompare(a.name);break;case"stock":r=t.stock-a.stock;break;case"salePrice":r=t.salePrice-a.salePrice;break;case"margin":r=j(t.purchasePrice,t.salePrice)-j(a.purchasePrice,a.salePrice);break}return u?r:-r}),s},[l,c,h,d,u]);function w(s){d===s?g(!u):(N(s),g(!0))}const m=({label:s,sKey:t,className:a=""})=>e.jsxs("button",{onClick:()=>w(t),className:`flex items-center gap-1 text-xs font-semibold uppercase tracking-wider text-surface-400 hover:text-white transition ${a}`,children:[s,e.jsx(L,{size:12,className:d===t?"text-primary-400":"text-surface-600"})]});return e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(E,{size:24,className:"text-primary-400"})," Inventario"]}),e.jsxs("p",{className:"text-sm text-surface-400",children:[l.length," productos · ",f.length," visibles"]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(F,{value:o,onChange:p,placeholder:"Buscar producto, SKU o proveedor...",className:"w-full max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-1 rounded-xl border border-surface-700/60 bg-surface-800/60 p-1 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>x("all"),className:`whitespace-nowrap rounded-lg px-3 py-1.5 text-xs font-medium transition ${c==="all"?"bg-primary-500/20 text-primary-300":"text-surface-400 hover:text-white"}`,children:[e.jsx(z,{size:12,className:"inline mr-1"})," Todas"]}),A.map(s=>e.jsxs("button",{onClick:()=>x(s.id),className:`whitespace-nowrap rounded-lg px-3 py-1.5 text-xs font-medium transition ${c===s.id?"bg-primary-500/20 text-primary-300":"text-surface-400 hover:text-white"}`,children:[s.emoji," ",s.label]},s.id))]})]}),e.jsx("div",{className:"glass overflow-hidden rounded-2xl",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-surface-700/50 bg-surface-800/50",children:[e.jsx("th",{className:"px-4 py-3",children:e.jsx(m,{label:"Producto",sKey:"name"})}),e.jsx("th",{className:"px-4 py-3 text-xs font-semibold uppercase tracking-wider text-surface-400",children:"Categoría"}),e.jsx("th",{className:"px-4 py-3 text-xs font-semibold uppercase tracking-wider text-surface-400",children:"SKU"}),e.jsx("th",{className:"px-4 py-3",children:e.jsx(m,{label:"Stock",sKey:"stock"})}),e.jsx("th",{className:"px-4 py-3 text-xs font-semibold uppercase tracking-wider text-surface-400",children:"P. Compra"}),e.jsx("th",{className:"px-4 py-3",children:e.jsx(m,{label:"P. Venta",sKey:"salePrice"})}),e.jsx("th",{className:"px-4 py-3",children:e.jsx(m,{label:"Margen",sKey:"margin"})}),e.jsx("th",{className:"px-4 py-3 text-xs font-semibold uppercase tracking-wider text-surface-400",children:"Estado"})]})}),e.jsx("tbody",{children:e.jsx(P,{children:f.map(s=>{const t=j(s.purchasePrice,s.salePrice),a=K(s.stock,s.minStock),r=I[a],i=$[s.category];return e.jsxs(M.tr,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"border-b border-surface-700/30 transition hover:bg-surface-800/40",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:i==null?void 0:i.emoji}),e.jsx("span",{className:"font-medium text-white",children:s.name})]})}),e.jsx("td",{className:"px-4 py-3 text-surface-400",children:i==null?void 0:i.label}),e.jsx("td",{className:"px-4 py-3 font-mono text-xs text-surface-500",children:s.sku}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-semibold ${a==="ok"?"text-white":a==="low"?"text-accent-400":"text-danger-400"}`,children:s.stock}),e.jsxs("span",{className:"text-xs text-surface-600",children:["/ ",s.minStock," ",s.unit]})]}),e.jsx("div",{className:"mt-1 h-1 w-16 overflow-hidden rounded-full bg-surface-700",children:e.jsx("div",{className:`h-full rounded-full transition-all ${a==="ok"?"bg-primary-500":a==="low"?"bg-accent-500":"bg-danger-500"}`,style:{width:`${Math.min(s.stock/(s.minStock*3)*100,100)}%`}})})]}),e.jsx("td",{className:"px-4 py-3 text-surface-400",children:b(s.purchasePrice)}),e.jsx("td",{className:"px-4 py-3 font-semibold text-white",children:b(s.salePrice)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`font-semibold ${t>=40?"text-primary-400":t>=25?"text-accent-400":"text-danger-400"}`,children:[t.toFixed(1),"%"]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`badge ${r.cls}`,children:r.label})})]},s.id)})})})]}),f.length===0&&e.jsx("div",{className:"py-12 text-center text-surface-500",children:"No se encontraron productos con esos filtros."})]})})]})}export{q as default};
